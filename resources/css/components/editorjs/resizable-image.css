@tailwind components;

/**
 * ResizableImage Plugin Styles
 * Scoped styles for the custom image upload plugin with resize functionality
 */

.resizable-image {
  @apply relative mt-5 outline-none;
}

/* Upload Interface Styles */
.resizable-image__upload-container {
  @apply border-2 border-dashed border-gray-300 rounded-xl py-10 px-5 text-center bg-gray-50 
         transition-all duration-300 cursor-pointer relative min-h-[140px] flex items-center 
         justify-center shadow-sm;
}

.resizable-image__upload-container:hover {
  @apply border-gray-400 bg-gray-100 -translate-y-0.5 shadow-lg;
}

.resizable-image__upload-container--dragover {
  @apply border-blue-500 bg-blue-50 border-solid scale-[1.02] shadow-xl shadow-blue-500/15;
}

.dark .resizable-image__upload-container {
  @apply border-gray-600 bg-gray-800 shadow-black/30;
}

.dark .resizable-image__upload-container:hover {
  @apply border-gray-500 bg-gray-900 shadow-black/40;
}

.dark .resizable-image__upload-container--dragover {
  @apply border-blue-400 bg-blue-900/50 shadow-blue-400/25;
}

.resizable-image__upload-button {
  @apply flex flex-col items-center gap-4 cursor-pointer w-full;
}

.resizable-image__upload-icon {
  @apply w-16 h-16 bg-gradient-to-br from-gray-100 to-gray-200 rounded-2xl flex items-center 
         justify-center transition-all duration-300 border border-gray-200;
}

.resizable-image__upload-container:hover .resizable-image__upload-icon {
  @apply bg-gradient-to-br from-gray-200 to-gray-300 scale-110 -translate-y-0.5 border-gray-400 
         shadow-xl shadow-black/10;
}

.resizable-image__upload-icon svg {
  @apply text-gray-500 w-9 h-9 transition-all duration-300;
}

.resizable-image__upload-container:hover .resizable-image__upload-icon svg {
  @apply text-gray-700 scale-110;
}

.resizable-image__upload-text {
  @apply text-base font-semibold text-gray-700 m-0 tracking-tight;
}

.dark .resizable-image__upload-icon {
  @apply bg-gradient-to-br from-gray-700 to-gray-800 border-gray-600;
}

.dark .resizable-image__upload-container:hover .resizable-image__upload-icon {
  @apply bg-gradient-to-br from-gray-600 to-gray-700 border-gray-500 shadow-black/30;
}

.dark .resizable-image__upload-icon svg {
  @apply text-gray-400;
}

.dark .resizable-image__upload-container:hover .resizable-image__upload-icon svg {
  @apply text-gray-200;
}

.dark .resizable-image__upload-text {
  @apply text-gray-200;
}

.resizable-image__file-input {
  @apply hidden;
}

/* Progress Styles */
.resizable-image__progress {
  @apply py-10 px-5 text-center;
}

.resizable-image__progress-bar {
  @apply w-full h-1 bg-gray-200 rounded-sm overflow-hidden mb-3;
}

.resizable-image__progress-fill {
  @apply h-full bg-blue-600 rounded-sm w-[30%];
  animation: progress-indeterminate 2s infinite ease-in-out;
}

.dark .resizable-image__progress-bar {
  @apply bg-gray-700;
}

.dark .resizable-image__progress-fill {
  @apply bg-blue-400;
}

@keyframes progress-indeterminate {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(400%);
  }
}

.resizable-image__progress-text {
  @apply text-sm text-gray-500 font-medium;
}

.dark .resizable-image__progress-text {
  @apply text-gray-300;
}

/* Image Container Styles */
.resizable-image__container {
  @apply relative inline-block max-w-full;
}

.resizable-image__container--resizable {
  @apply border-2 border-transparent transition-colors duration-200;
}

.resizable-image__container--resizable:hover {
  @apply border-blue-600;
}

.dark .resizable-image__container--resizable:hover {
  @apply border-blue-400;
}

.resizable-image__img {
  @apply block max-w-full h-auto rounded-md shadow-md;
}

/* Resize Handles */
.resizable-image__handle {
  @apply absolute bg-blue-600 border-2 border-white rounded-full w-3 h-3 opacity-0 
         transition-opacity duration-200 z-10;
}

.resizable-image__container--resizable:hover .resizable-image__handle {
  @apply opacity-100;
}

.dark .resizable-image__handle {
  @apply bg-blue-400 border-gray-800;
}

/* Corner handles */
.resizable-image__handle--nw {
  @apply -top-1.5 -left-1.5 cursor-nw-resize;
}

.resizable-image__handle--ne {
  @apply -top-1.5 -right-1.5 cursor-ne-resize;
}

.resizable-image__handle--sw {
  @apply -bottom-1.5 -left-1.5 cursor-sw-resize;
}

.resizable-image__handle--se {
  @apply -bottom-1.5 -right-1.5 cursor-se-resize;
}

/* Edge handles */
.resizable-image__handle--n {
  @apply -top-1.5 left-1/2 -translate-x-1/2 cursor-n-resize;
}

.resizable-image__handle--s {
  @apply -bottom-1.5 left-1/2 -translate-x-1/2 cursor-s-resize;
}

.resizable-image__handle--e {
  @apply top-1/2 -right-1.5 -translate-y-1/2 cursor-e-resize;
}

.resizable-image__handle--w {
  @apply top-1/2 -left-1.5 -translate-y-1/2 cursor-w-resize;
}

/* Caption Input */
.resizable-image__caption {
  @apply w-full mt-3 py-2 px-3 border border-gray-200 rounded-md text-sm text-gray-600 
         bg-white transition-colors duration-200 outline-none;
}

.resizable-image__caption:focus {
  @apply border-blue-600 ring-2 ring-blue-600/20;
}

.resizable-image__caption:read-only {
  @apply bg-gray-50 text-gray-500 cursor-default;
}

.resizable-image__caption::placeholder {
  @apply text-gray-400;
}

.dark .resizable-image__caption {
  @apply border-gray-600 bg-gray-800 text-gray-200;
}

.dark .resizable-image__caption:focus {
  @apply border-blue-400 ring-blue-400/20;
}

.dark .resizable-image__caption:read-only {
  @apply bg-gray-900 text-gray-400;
}

.dark .resizable-image__caption::placeholder {
  @apply text-gray-500;
}

/* Mobile Responsive */
@media (max-width: 768px) {
  .resizable-image__upload-container {
    @apply py-8 px-4 min-h-[100px];
  }

  .resizable-image__upload-icon {
    @apply w-10 h-10;
  }

  .resizable-image__upload-icon svg {
    @apply w-5 h-5;
  }

  .resizable-image__upload-text {
    @apply text-sm;
  }

  .resizable-image__handle {
    @apply w-4 h-4;
  }

  .resizable-image__handle--nw,
  .resizable-image__handle--ne,
  .resizable-image__handle--sw,
  .resizable-image__handle--se {
    @apply -top-2 -bottom-2 -left-2 -right-2;
  }

  .resizable-image__handle--n,
  .resizable-image__handle--s {
    @apply -top-2 -bottom-2;
  }

  .resizable-image__handle--e,
  .resizable-image__handle--w {
    @apply -left-2 -right-2;
  }
}

/* Accessibility */
.resizable-image__upload-container:focus-within {
  @apply outline outline-2 outline-blue-600 outline-offset-2;
}

.resizable-image__handle:focus {
  @apply outline outline-2 outline-blue-600 outline-offset-2 opacity-100;
}

/* Animation for smooth interactions */
.resizable-image__img {
  @apply transition-transform duration-100 ease-out select-none;
}

.resizable-image__container--resizable:hover .resizable-image__img {
  @apply scale-[1.01];
}

/* Settings Panel Styles */
.resizable-image__settings {
  @apply flex flex-col gap-1 min-w-[200px];
}

.resizable-image__setting-button {
  @apply flex items-center gap-2 py-2 px-3 rounded-md cursor-pointer transition-colors 
         duration-200 bg-transparent hover:bg-gray-100;
}

.resizable-image__setting-icon {
  @apply w-5 h-5 flex items-center justify-center text-gray-500;
}

.resizable-image__setting-label {
  @apply text-sm text-gray-600 font-medium;
}

.dark .resizable-image__setting-button:hover {
  @apply bg-gray-700;
}

.dark .resizable-image__setting-icon {
  @apply text-gray-300;
}

.dark .resizable-image__setting-label {
  @apply text-gray-200;
}

/* Dark Mode Styles for Images */
.resizable-image__container--dark {
  @apply bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-3 border border-gray-600 
         shadow-xl shadow-black/30;
}

.resizable-image__container--dark .resizable-image__img {
  @apply border-2 border-gray-600 rounded-lg shadow-lg shadow-black/40;
  filter: brightness(0.85) contrast(1.15) saturate(1.1);
}

.resizable-image__container--dark .resizable-image__handle {
  @apply bg-blue-400 border-gray-800 shadow-sm shadow-black/30;
}

/* Loading state overlay */
.resizable-image__loading {
  @apply absolute inset-0 bg-white/90 backdrop-blur-sm flex items-center justify-center 
         rounded-xl z-20 border border-gray-200/80;
}

.dark .resizable-image__loading {
  @apply bg-gray-900/90 border-gray-600/80;
}